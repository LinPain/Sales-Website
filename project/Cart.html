<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Shopping Cart - BTEC</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <style>
    body { background:#f5f5f5; font-family:Arial; }
    .cart-wrap { background:#fff; padding:20px; margin-top:20px; border-radius:6px; }
    .cart-item { border-bottom:1px solid #ddd; padding:12px 0; display:flex; align-items:center; }
    .cart-item img { max-width:100px; margin-right:20px; border:2px solid #111; }
    .cart-item h4 { margin:0; font-size:18px; }
    .cart-item .price { font-weight:bold; color:#0f3a66; }
    .cart-total { text-align:right; font-size:20px; font-weight:bold; margin-top:20px; }
    .btn-checkout { margin-top:20px; }
  </style>
</head>
<body>
  <div class="container cart-wrap">
    <h2>Your Shopping Cart</h2>
    <div id="cartItems"></div>
    <div id="cartTotal" class="cart-total"></div>
    <button class="btn btn-success btn-checkout">Proceed to Checkout</button>
    <a href="MainPage.html" class="btn btn-default">Continue Shopping</a>
  </div>

  <script>
    // Example cart data stored in localStorage
    // Each product: {id, title, price, img}
    function loadCart() {
      let raw = localStorage.getItem('btec_cart');
      let cart = raw ? JSON.parse(raw) : [];
      return cart;
    }

    function saveCart(cart) {
      localStorage.setItem('btec_cart', JSON.stringify(cart));
    }

    function renderCart() {
      let cart = loadCart();
      let container = document.getElementById('cartItems');
      let totalEl = document.getElementById('cartTotal');
      container.innerHTML = '';
      let total = 0;

      if (cart.length === 0) {
        container.innerHTML = '<p>Your cart is empty.</p>';
        totalEl.textContent = '';
        return;
      }

      cart.forEach((item, index) => {
        let div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <img src="${item.img}" alt="${item.title}">
          <div style="flex:1;">
            <h4>${item.title}</h4>
            <p class="price">${item.price}</p>
          </div>
          <button class="btn btn-danger btn-sm" data-index="${index}">Remove</button>
        `;
        container.appendChild(div);

        // parse price (strip $ or non-numeric)
        let num = parseFloat(item.price.replace(/[^0-9.]/g,''));
        if (!isNaN(num)) total += num;
      });

      totalEl.textContent = 'Total: $' + total.toFixed(2);

      // attach remove handlers
      container.querySelectorAll('.btn-danger').forEach(btn => {
        btn.addEventListener('click', function() {
          let idx = parseInt(this.getAttribute('data-index'));
          let cart = loadCart();
          cart.splice(idx,1);
          saveCart(cart);
          renderCart();
        });
      });
    }

    document.addEventListener('DOMContentLoaded', renderCart);
  </script>
</body>
</html>